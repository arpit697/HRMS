(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{OCQW:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var o=i("jRgp"),r=i("8Y7J"),n=i("N+K7");let s=(()=>{class e{constructor(e){this.http=e}saveContent(e){return this.http.post(o.b,e).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(n.a))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},TBg1:function(e,t,i){"use strict";i.r(t),i.d(t,"OauthModule",(function(){return p}));var o=i("SVse"),r=i("iInd"),n=i("mrSG"),s=i("quSY"),a=i("R9M2"),c=i("+7By"),u=i("AytR"),l=i("8Y7J"),h=i("K1OG"),d=i("5dVO"),v=i("oX63"),f=i("z4EA"),b=i("A1CT"),g=i("OCQW");const m=[{path:"",component:(()=>{class e{constructor(e,t,i,o,r,n,a){this.magicService=e,this.loaderService=t,this.router=i,this.accountService=o,this.cookieService=r,this.utility=n,this.bookmarkSerivce=a,this.sub=new s.a,this.getOauthResult()}getOauthResult(){return Object(n.b)(this,void 0,void 0,(function*(){this.loaderService.loader.next(!0);try{const t=yield this.magicService.magic_social.oauth.getRedirectResult();console.log(t);const i={email:t.oauth.userInfo.email,signupSource:a.i[t.oauth.provider],firstName:t.oauth.userInfo.givenName,lastName:t.oauth.userInfo.familyName,[a.h[t.oauth.provider]]:t.oauth.userHandle};try{let e=yield this.accountService.socialLogin(i);console.log(e),this.accountService.afterLoginSuccess(e.data),this.handleSaveForLater(),this.router.navigate([c.DASHBOARD.fullUrl])}catch(e){this.handleError(e)}this.loaderService.loader.next(!1)}catch(e){this.handleError(e)}}))}handleError(e){console.log(e),this.router.navigate(["/"]),this.loaderService.loader.next(!1)}handleSaveForLater(){return Object(n.b)(this,void 0,void 0,(function*(){const e=this.cookieService.get(u.a.saveLaterKey);if(e&&"null"!=e){const i=Object.assign(Object.assign({},JSON.parse(e)),{afterLogin:!0});if(this.utility.getAuthToken()){if(!this.utility.getEmailVerifiedToken()||"false"===this.utility.getEmailVerifiedToken()){const e=this.utility.openDialog({cancelButtonText:"Cancel",confirmButtonText:"Resend",message:"Please verify your email before saving this resource. If you haven't recieved a verification email, click resend"});return void this.sub.add(e.subscribe(e=>Object(n.b)(this,void 0,void 0,(function*(){if(e){let{message:e}=yield this.accountService.resendVerificationEmail();this.utility.showAlert(e)}}))))}try{yield this.bookmarkSerivce.saveContent(i)}catch(t){console.log(t)}}}}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(l.Kb(h.a),l.Kb(d.a),l.Kb(r.c),l.Kb(v.a),l.Kb(f.a),l.Kb(b.a),l.Kb(g.a))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-oauth"]],decls:3,vars:0,consts:[[2,"display","flex","justify-content","center","align-items","center","height","100vh"]],template:function(e,t){1&e&&(l.Pb(0,"div",0),l.Pb(1,"h2"),l.Fc(2,"Please wait while we log you in..."),l.Ob(),l.Ob())},styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(m)],r.g]}),e})(),p=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[o.c,y]]}),e})()}}]);