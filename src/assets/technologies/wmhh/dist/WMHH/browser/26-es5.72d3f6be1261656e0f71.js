!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{OCQW:function(t,r,i){"use strict";i.d(r,"a",(function(){return s}));var a=i("jRgp"),o=i("8Y7J"),c=i("N+K7"),s=function(){var t=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"saveContent",value:function(e){return this.http.post(a.b,e).toPromise()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Tb(c.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},TBg1:function(t,r,i){"use strict";i.r(r),i.d(r,"OauthModule",(function(){return O}));var a,o,c,s=i("SVse"),u=i("iInd"),l=i("mrSG"),h=i("quSY"),f=i("R9M2"),v=i("+7By"),b=i("AytR"),d=i("8Y7J"),p=i("K1OG"),g=i("5dVO"),m=i("oX63"),y=i("z4EA"),k=i("A1CT"),w=i("OCQW"),S=[{path:"",component:(a=function(){function t(n,r,i,a,o,c,s){e(this,t),this.magicService=n,this.loaderService=r,this.router=i,this.accountService=a,this.cookieService=o,this.utility=c,this.bookmarkSerivce=s,this.sub=new h.a,this.getOauthResult()}return n(t,[{key:"getOauthResult",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loaderService.loader.next(!0),e.prev=1,e.next=4,this.magicService.magic_social.oauth.getRedirectResult();case 4:return t=e.sent,console.log(t),i={email:t.oauth.userInfo.email,signupSource:f.i[t.oauth.provider],firstName:t.oauth.userInfo.givenName,lastName:t.oauth.userInfo.familyName},a=f.h[t.oauth.provider],o=t.oauth.userHandle,a in i?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,n=i,e.prev=7,e.next=10,this.accountService.socialLogin(n);case 10:r=e.sent,console.log(r),this.accountService.afterLoginSuccess(r.data),this.handleSaveForLater(),this.router.navigate([v.DASHBOARD.fullUrl]),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),this.handleError(e.t0);case 17:this.loaderService.loader.next(!1),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),this.handleError(e.t1);case 23:case"end":return e.stop()}var i,a,o}),e,this,[[1,20],[7,14]])})))}},{key:"handleError",value:function(e){console.log(e),this.router.navigate(["/"]),this.loaderService.loader.next(!1)}},{key:"handleSaveForLater",value:function(){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.cookieService.get(b.a.saveLaterKey))||"null"==t){e.next=15;break}if(n=Object.assign(Object.assign({},JSON.parse(t)),{afterLogin:!0}),!this.utility.getAuthToken()){e.next=15;break}if(this.utility.getEmailVerifiedToken()&&"false"!==this.utility.getEmailVerifiedToken()){e.next=7;break}return r=this.utility.openDialog({cancelButtonText:"Cancel",confirmButtonText:"Resend",message:"Please verify your email before saving this resource. If you haven't recieved a verification email, click resend"}),e.abrupt("return",void this.sub.add(r.subscribe((function(e){return Object(l.b)(i,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.accountService.resendVerificationEmail();case 3:n=t.sent,r=n.message,this.utility.showAlert(r);case 6:case"end":return t.stop()}}),t,this)})))}))));case 7:return e.prev=7,e.next=10,this.bookmarkSerivce.saveContent(n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[7,12]])})))}},{key:"ngOnInit",value:function(){}}]),t}(),a.\u0275fac=function(e){return new(e||a)(d.Kb(p.a),d.Kb(g.a),d.Kb(u.c),d.Kb(m.a),d.Kb(y.a),d.Kb(k.a),d.Kb(w.a))},a.\u0275cmp=d.Eb({type:a,selectors:[["app-oauth"]],decls:3,vars:0,consts:[[2,"display","flex","justify-content","center","align-items","center","height","100vh"]],template:function(e,t){1&e&&(d.Pb(0,"div",0),d.Pb(1,"h2"),d.Fc(2,"Please wait while we log you in..."),d.Ob(),d.Ob())},styles:[""]}),a)}],x=((c=function t(){e(this,t)}).\u0275mod=d.Ib({type:c}),c.\u0275inj=d.Hb({factory:function(e){return new(e||c)},imports:[[u.g.forChild(S)],u.g]}),c),O=((o=function t(){e(this,t)}).\u0275mod=d.Ib({type:o}),o.\u0275inj=d.Hb({factory:function(e){return new(e||o)},imports:[[s.c,x]]}),o)}}])}();