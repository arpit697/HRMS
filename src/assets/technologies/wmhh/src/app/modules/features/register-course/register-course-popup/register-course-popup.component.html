<div class="popup-wrapper">
  <div class="header">
    <a (click)="close()" class="close-icon"
      ><img src="assets/images/close-icon.png" alt="Image"
    /></a>
  </div>
  <div class="popup-inner">
    <div class="description">
      <h3>Course Registration Form</h3>
      <p>
        Please allow up to two business days to receive confirmation of your
        registration and any links or virtual materials you will need to
        complete the course. If you have any questions or issues with
        registration, please contact: work.mentalhealth@cmha.bc.ca
      </p>
    </div>
    <div [formGroup]="trainingForm" class="form-section">
      <div class="flex">
        <div class="col-6">
          <mat-label>First Name</mat-label>
          <mat-form-field class="example-form-field input" appearance="outline">
            <input formControlName="firstName" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["firstName"] | validate: "First Name"
            }}</mat-error>
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-label>Last Name</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="lastName" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["lastName"] | validate: "Last Name"
            }}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="flex">
        <div class="col-6">
          <mat-label>Email</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="emailAddress" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["emailAddress"] | validate: "Email"
            }}</mat-error>
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-label>Phone Number</mat-label>
          <mat-form-field class="example-full-width" appearance="outline">
            <input
              formControlName="phoneNumber"
              (keydown)="handleKeyDown($event)"
              numberOnly
              matInput
            />
            <mat-error>{{
              trainingForm
                | getControl: ["phoneNumber"]
                | validate: "Phone Number"
            }}</mat-error>
          </mat-form-field>
        </div>
      </div>

      <h3 style="font-size: 22px; margin-bottom: 30px">Mailing Address</h3>

      <div class="flex">
        <div class="col-4">
          <mat-label>Apartment/Unit</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="aptunit" matInput type="text" />
            <mat-error>{{
              trainingForm
                | getControl: ["aptunit"]
                | validate: "Appartment/Unit"
            }}</mat-error>
          </mat-form-field>
        </div>

        <div class="col-4">
          <mat-label>Number</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="aptnumber" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["aptnumber"] | validate: "Number"
            }}</mat-error>
          </mat-form-field>
        </div>
        <div class="col-4">
          <mat-label>Street</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="street" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["street"] | validate: "Street"
            }}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="flex">
        <div class="col-6">
          <mat-label>City</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="city" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["city"] | validate: "City"
            }}</mat-error>
          </mat-form-field>
        </div>
        <div class="col-6">
          <mat-label>Province</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="province" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["province"] | validate: "Province"
            }}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="flex">
        <div class="col-6">
          <mat-label>Postal Code</mat-label>
          <mat-form-field class="example-form-field" appearance="outline">
            <input formControlName="postalCode" matInput type="text" />
            <mat-error>{{
              trainingForm | getControl: ["postalCode"] | validate: "Pin Code"
            }}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <ng-container
        formArrayName="questionanswerobj"
        *ngFor="let item of feedbackQuestionsFormArray.controls; let i = index"
      >
        <div [ngSwitch]="(item | getControl: ['questiontype']).value">
          <div *ngSwitchCase="'radio'">
            <h3 [ngClass]="{ invalid: item.touched && item.invalid }">
              {{ (item | getControl: ["question"]).value }}
            </h3>
            <div class="radio-listing">
              <mat-radio-group
                (change)="selectionChange(item, i)"
                [formControl]="item | getControl: ['answer']"
                aria-labelledby="example-radio-group-label"
                class="example-radio-group"
              >
                <mat-radio-button
                  *ngFor="let list of (item | getControl: ['option']).value"
                  class="example-radio-button"
                  [value]="list.value"
                  >{{ list.viewValue }}</mat-radio-button
                >
              </mat-radio-group>
              <div
                *ngIf="(item | getControl: ['answer']).value === 'Other'"
                class="input-wrap"
              >
                <mat-form-field class="example-form-field" appearance="outline">
                  <input
                    [formControl]="item | getControl: ['otherAnswer']"
                    matInput
                    type="text"
                    placeholder="Please describe"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div *ngSwitchCase="'Other'" class="input-wrap">
            <mat-form-field class="example-form-field" appearance="outline">
              <input
                [formControl]="item | getControl: ['otherAnswer']"
                matInput
                type="text"
                placeholder="Please describe"
              />
            </mat-form-field>
          </div>
          <div *ngSwitchDefault>
            <mat-label>{{ (item | getControl: ["question"]).value }}</mat-label>
            <mat-form-field
              class="example-form-field describe-area"
              appearance="outline"
            >
              <textarea
                matInput
                [formControl]="item | getControl: ['answer']"
                type="text"
                [placeholder]="(item | getControl: ['placeholdertext']).value"
              ></textarea>
            </mat-form-field>
          </div>
        </div>
      </ng-container>

      <!-- <h3>What best describes your workplace?</h3>
            <div class="radio-listing">
                <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group">
                    <mat-radio-button *ngFor="let item of describesWorkplace" class="example-radio-button" [value]="item.value">{{item.viewValue}}</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="2">Hotel or motel</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="3">Adventure or vacation destination (e.g.: ski hill)</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="4">Community social service</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="5">Other</mat-radio-button>
                </mat-radio-group>
                <div *ngIf="(trainingForm | getControl:['best']).value ==='Other'" class="input-wrap">
                    <mat-form-field class="example-form-field" appearance="outline" >
                        <input formControlName="otherBest" matInput type="text" placeholder="Please describe">
                    </mat-form-field>
                </div>
            </div>
            <h3>What best describes your role?</h3>
            <div class="radio-listing">
                <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group">
                    <mat-radio-button *ngFor="let item of describeRoles" class="example-radio-button" [value]="item.value">{{item.viewValue}}</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="2">Administrative employee</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="3">Customer/client-facing manager or supervisor</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="4">Administrative manager or supervisor</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="5">Employer/Owner/Operator</mat-radio-button>
                    <mat-radio-button class="example-radio-button" value="6">Other</mat-radio-button>
                </mat-radio-group>
                        <div *ngIf="(trainingForm | getControl:['role']).value ==='Other'" class="input-wrap">
                            <mat-form-field class="example-form-field" appearance="outline" >
                                <input formControlName="otherRole" matInput type="text" placeholder="Please describe">
                            </mat-form-field>
                        </div>
            </div> -->
      <!-- <mat-label>Are there any comments or specific training ideas that you would like to share with us? (optional)</mat-label>
            <mat-form-field  class="example-form-field" appearance="outline" >
                <input matInput formControlName="comments" type="text" placeholder="Please describe">
            </mat-form-field> -->
    </div>
  </div>
  <div class="btn-wrap">
    <button (click)="submitTraining()" type="submit" class="primary-btn">
      Submit
    </button>
  </div>
</div>
